---
layout: post
title: linux下top命令参数解释
date: 2012-07-08 00:07:12
category: 技术
tags: top
---

top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。下面详细介绍它的使用方法。 

```
top - 14:19:21 up 211 days, 14:31,  1 user,  load average: 0.00, 0.00, 0.00
Tasks:  89 total,   1 running,  88 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   1018600k total,   844680k used,   173920k free,   198672k buffers
Swap:  1048568k total,        0k used,  1048568k free,   282408k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
    1 root      20   0 19356 1436 1132 S  0.0  0.1   0:01.43 init
    2 root      20   0     0    0    0 S  0.0  0.0   0:00.73 kthreadd
    3 root      RT   0     0    0    0 S  0.0  0.0   0:00.00 migration/0
    4 root      20   0     0    0    0 S  0.0  0.0   0:21.17 ksoftirqd/0
    5 root      RT   0     0    0    0 S  0.0  0.0   0:00.00 migration/0
    6 root      RT   0     0    0    0 S  0.0  0.0   0:33.98 watchdog/0
    7 root      20   0     0    0    0 S  0.0  0.0  12:16.11 events/0
    8 root      20   0     0    0    0 S  0.0  0.0   0:00.00 cgroup
    9 root      20   0     0    0    0 S  0.0  0.0   0:00.25 khelper
   10 root      20   0     0    0    0 S  0.0  0.0   0:00.00 netns
   11 root      20   0     0    0    0 S  0.0  0.0   0:00.00 async/mgr
   12 root      20   0     0    0    0 S  0.0  0.0   0:00.00 pm
   13 root      20   0     0    0    0 S  0.0  0.0   0:00.00 xenwatch
   14 root      20   0     0    0    0 S  0.0  0.0   0:00.00 xenbus
   15 root      20   0     0    0    0 S  0.0  0.0   1:14.46 sync_supers
   16 root      20   0     0    0    0 S  0.0  0.0   1:19.75 bdi-default
   17 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kintegrityd/0
   18 root      20   0     0    0    0 S  0.0  0.0   0:04.86 kblockd/0
```
**统计信息区** 前五行是系统整体的统计信息。第一行是任务队列信息，同 uptime 命令的执行结果。其内容如下： 

01:06:48
当前时间

up 1:22
系统运行时间，格式为时:分

1 user
当前登录用户数

load average: 0.06, 0.60, 0.48
系统负载，即任务队列的平均长度。 三个数值分别为 1分钟、5分钟、15分钟前到现在的平均值。
第二、三行为进程和CPU的信息。当有多个CPU时，这些内容可能会超过两行。内容如下： 

Tasks: 29 total
进程总数

1 running
正在运行的进程数

28 sleeping
睡眠的进程数

0 stopped
停止的进程数

0 zombie
僵尸进程数

Cpu(s): 0.3% us
用户空间占用CPU百分比

1.0% sy
内核空间占用CPU百分比

0.0% ni
用户进程空间内改变过优先级的进程占用CPU百分比

98.7% id
空闲CPU百分比

0.0% wa
等待输入输出的CPU时间百分比

0.0% hi

0.0% si
最后两行为内存信息。内容如下： 

Mem: 191272k total
物理内存总量

173656k used
使用的物理内存总量

17616k free
空闲内存总量

22052k buffers
用作内核缓存的内存量

Swap: 192772k total
交换区总量

0k used
使用的交换区总量

192772k free
空闲交换区总量

123988k cached
缓冲的交换区总量。 内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖， 该数值即为这些**内容已存在于内存中**的交换区的大小。 相应的内存再次被换出时可不必再对交换区写入。
**进程信息区** 统计信息区域的下方显示了各个进程的详细信息。首先来认识一下各列的含义。 

序号
列名
含义

a
PID
进程id

b
PPID
父进程id

c
RUSER
Real user name

d
UID
进程所有者的用户id

e
USER
进程所有者的用户名

f
GROUP
进程所有者的组名

g
TTY
启动进程的终端名。不是从终端启动的进程则显示为 ?

h
PR
优先级

i
NI
nice值。负值表示高优先级，正值表示低优先级

j
P
最后使用的CPU，仅在多CPU环境下有意义

k
%CPU
上次更新到现在的CPU时间占用百分比

l
TIME
进程使用的CPU时间总计，单位秒

m
TIME+
进程使用的CPU时间总计，单位1/100秒

n
%MEM
进程使用的**物理内存**百分比

o
VIRT
进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES

p
SWAP
进程使用的虚拟内存中，被换出的大小，单位kb。

q
RES
进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA

r
CODE
可执行代码占用的**物理**内存大小，单位kb

s
DATA
可执行代码以外的部分(数据段+栈)占用的**物理**内存大小，单位kb

t
SHR
共享内存大小，单位kb

u
nFLT
页面错误次数

v
nDRT
最后一次写入到现在，被修改过的页面数。

w
S
进程状态。 **D**=不可中断的睡眠状态 **R**=运行 **S**=睡眠 **T**=跟踪/停止 **Z**=僵尸进程

x
COMMAND
命令名/命令行

y
WCHAN
若该进程在睡眠，则显示睡眠中的系统函数名

z
Flags
任务标志，参考 sched.h  

默认情况下仅显示比较重要的 PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND 列。可以通过下面的快捷键来更改显示内容。   

**更改显示内容** 

通过 f 键可以选择显示的内容。按 f 键之后会显示列的列表，按 a-z 即可显示或隐藏对应的列，最后按回车键确定。 按 o 键可以改变列的显示顺序。按小写的 a-z 可以将相应的列向右移动，而大写的 A-Z 可以将相应的列向左移动。最后按回车键确定。 按大写的 F 或 O 键，然后按 a-z 可以将进程按照相应的列进行排序。而大写的 R 键可以将当前的排序倒转。   

**命令使用** 

1． 工具（命令）名称 top 
2．工具（命令）作用 显示系统当前的进程和其他状况； top是一个动态显示过程,即可以通过用户按键来不断刷新当前状态.如果在前台执行该命令,它将独占前台,直到用户终止该程序为止. 比较准确的说,top命令提供了实时的对系统处理器的状态监视.它将显示系统中CPU最“敏感”的任务列表.该命令可以按CPU使用.内存使用和执行时间对任务进行排序；而且该命令的很多特性都可以通过交互式命令或者在个人定制文件中进行设定.   
3．环境设置 在Linux下使用。   
4．使用方法   
4．1使用格式 top [-] [d] [p] [q] [c] [C] [S] [s]  [n] 
4．2参数说明 d 指定每两次屏幕信息刷新之间的时间间隔。当然用户可以使用s交互命令来改变之。  p 通过指定监控进程ID来仅仅监控某个进程的状态。
